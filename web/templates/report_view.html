{% extends "base.html" %}

{% block title %}Report {{ report_id }}{% endblock %}

{% block content %}
<header>
    <div class="header-content">
        <h1>Scan Report</h1>
        <p class="subtitle" id="report-subtitle">Loading...</p>
    </div>
</header>

<main>
    <div class="report-view-panel">
        <div class="results-header">
            <h2 id="report-title">Report Details</h2>
            <div class="results-actions">
                <button class="btn-secondary" onclick="downloadReport()">Download JSON</button>
                <button class="btn-secondary" onclick="window.history.back()">Back</button>
            </div>
        </div>

        <div id="stats-container"></div>
        <div id="filter-bar" class="filter-bar" style="display: none;">
            <span class="filter-label">Severity:</span>
            <button type="button" class="filter-btn active" data-filter="severity" data-value="">All</button>
            <button type="button" class="filter-btn" data-filter="severity" data-value="CRITICAL">Critical</button>
            <button type="button" class="filter-btn" data-filter="severity" data-value="HIGH">High</button>
            <button type="button" class="filter-btn" data-filter="severity" data-value="MEDIUM">Medium</button>
            <button type="button" class="filter-btn" data-filter="severity" data-value="LOW">Low</button>
            <button type="button" class="filter-btn" data-filter="severity" data-value="INFO">Info</button>
            <span class="filter-label">Scanner:</span>
            <button type="button" class="filter-btn active" data-filter="scanner" data-value="">All</button>
            <button type="button" class="filter-btn" data-filter="scanner" data-value="dependency">Dependency</button>
            <button type="button" class="filter-btn" data-filter="scanner" data-value="sast">SAST</button>
            <button type="button" class="filter-btn" data-filter="scanner" data-value="network">Network</button>
        </div>
        <div id="findings-container"></div>
    </div>
</main>
{% endblock %}

{% block scripts %}
<script>
    const reportId = '{{ report_id }}';
</script>
<script src="/static/report_view.js"></script>
{% endblock %}
